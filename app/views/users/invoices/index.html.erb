<div class="card mb-3">
  <div class="card-header">
    <div class="row flex-between-center">
      <div class="col-4 col-sm-auto d-flex align-items-center pe-0">
        <h5 class="fs-9 mb-0 text-nowrap py-2 py-xl-0">Invoices</h5>
      </div>
      <div class="col-8 col-sm-auto ms-auto text-end ps-0">
        <div id="orders-actions">
          <%= link_to new_users_invoice_path, class: 'btn btn-falcon-default btn-sm' do %>
            <span class="fas fa-plus" data-fa-transform="shrink-3 down-2"></span>
            <span class="d-none d-sm-inline-block ms-1">New</span>
          <%-end%>
          <button class="btn btn-falcon-default btn-sm mx-2" type="button"><span class="fas fa-filter" data-fa-transform="shrink-3 down-2"></span><span class="d-none d-sm-inline-block ms-1">Filter</span></button>
          <button class="btn btn-falcon-default btn-sm" type="button"><span class="fas fa-external-link-alt" data-fa-transform="shrink-3 down-2"></span><span class="d-none d-sm-inline-block ms-1">Export</span></button>
        </div>
      </div>
    </div>
  </div>
  <div class="card-body p-0">
    <div class="table-responsive scrollbar">
      <table class="table table-sm table-striped fs-10 mb-4 overflow-hidden">
        <thead class="bg-200">
          <tr>
            <th class="text-900 sort pe-1 align-middle white-space-nowrap">Invoice</th>
            <th class="text-900 sort pe-1 align-middle white-space-nowrap pe-7">Date</th>
            <th class="text-900 sort pe-1 align-middle white-space-nowrap text-center">Status</th>
            <th class="text-900 sort pe-1 align-middle white-space-nowrap text-end">Amount</th>
            <th class="text-900 sort pe-1 align-middle white-space-nowrap text-end">Tax</th>
            <th class="text-900 sort pe-1 align-middle white-space-nowrap text-end">Discount</th>
            <th class="text-900 sort pe-1 align-middle white-space-nowrap text-end">Final Amount</th>
            <th class="no-sort"></th>
          </tr>
        </thead>
        <tbody class="list" id="table-orders-body">
          <%- @invoices.each do |invoice| %>
            <tr class="btn-reveal-trigger">
              <td class="order py-2 align-middle white-space-nowrap">
                <a href="<%= users_invoice_path(invoice) %>">
                  <strong>#<%= invoice.id %></strong>
                </a> by <strong><%= invoice.user.name %></strong><br />
                <a href="mailto:<%= invoice.user.email %>"><%= invoice.user.email %></a>
              </td>
              <td class="date py-2 align-middle"><%= invoice.created_at.strftime('%d/%m/%Y') %></td>
              <td class="status py-2 align-middle text-center fs-9 white-space-nowrap">
                <%- if invoice.paid? %>
                  <span class="badge badge rounded-pill d-block badge-subtle-primary">
                    Paid<span class="ms-1 fas fa-redo" data-fa-transform="shrink-2"></span>
                  </span>
                <%- else %>
                  <span class="badge badge rounded-pill d-block badge-subtle-success">
                    Pending<span class="ms-1 fas fa-check" data-fa-transform="shrink-2"></span>
                  </span>
                <%- end %>
              </td>
              <td class="amount py-2 align-middle text-end fs-9 fw-medium"><%= humanized_money_with_symbol invoice.price %></td>
              <td class="amount py-2 align-middle text-end fs-9 fw-medium"><%= humanized_money_with_symbol invoice.tax %></td>
              <td class="amount py-2 align-middle text-end fs-9 fw-medium"><%= humanized_money_with_symbol invoice.discount %></td>
              <td class="amount py-2 align-middle text-end fs-9 fw-medium"><%= humanized_money_with_symbol invoice.total_price %></td>
              <td class="py-2 align-middle white-space-nowrap text-end">
                <div class="dropdown font-sans-serif position-static">
                  <button class="btn btn-link text-600 btn-sm dropdown-toggle btn-reveal" type="button" id="order-dropdown-0" data-bs-toggle="dropdown" data-boundary="viewport" aria-haspopup="true" aria-expanded="false">
                    <span class="fas fa-ellipsis-h fs-10"></span>
                  </button>
                  <div class="dropdown-menu dropdown-menu-end border py-0" aria-labelledby="order-dropdown-0">
                    <div class="py-2">
                      <a class="dropdown-item" href="<%= edit_users_invoice_path(invoice) %>">Edit</a>
                      <a class="dropdown-item" href="<%= paid_users_invoice_path(invoice) %>">Delivered</a>
                      <div class="dropdown-divider"></div>
                      <%= link_to "Delete", users_invoice_path(invoice), class: 'dropdown-item text-danger', data: { turbo_method: :delete, turbo_confirm: "Are you sure?" } %>
                    </div>
                  </div>
                </div>
              </td>
            </tr>
          <%- end %>
        </tbody>
      </table>
    </div>
  </div>
</div>
